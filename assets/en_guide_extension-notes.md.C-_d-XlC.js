import{_ as o,c as a,o as i,af as l}from"./chunks/framework.PeLcR_tw.js";const b=JSON.parse('{"title":"Extension Notes","description":"","frontmatter":{},"headers":[],"relativePath":"en/guide/extension-notes.md","filePath":"en/guide/extension-notes.md"}'),s={name:"en/guide/extension-notes.md"};function t(n,e,r,d,h,c){return i(),a("div",null,e[0]||(e[0]=[l('<h1 id="extension-notes" tabindex="-1">Extension Notes <a class="header-anchor" href="#extension-notes" aria-label="Permalink to “Extension Notes”">​</a></h1><p>Because it is a static compilation, extensions will not compile 100% perfectly, and different extensions have different requirements for PHP and the environment, which will be listed one by one here.</p><h2 id="curl" tabindex="-1">curl <a class="header-anchor" href="#curl" aria-label="Permalink to “curl”">​</a></h2><p>HTTP3 support is not enabled by default, compile with <code>--with-libs=&quot;nghttp2,nghttp3,ngtcp2&quot;</code> to enable HTTP3 support for PHP &gt;= 8.4.</p><p>When using curl to request HTTPS, there may be an <code>error:80000002:system library::No such file or directory</code> error. For details on the solution, see <a href="./../faq/#unable-to-use-ssl">FAQ - Unable to use ssl</a>.</p><h2 id="phpmicro" tabindex="-1">phpmicro <a class="header-anchor" href="#phpmicro" aria-label="Permalink to “phpmicro”">​</a></h2><ol><li>Only PHP &gt;= 8.0 is supported.</li></ol><h2 id="swoole" tabindex="-1">swoole <a class="header-anchor" href="#swoole" aria-label="Permalink to “swoole”">​</a></h2><ol><li>swoole &gt;= 5.0 Only PHP &gt;= 8.0 is supported.</li><li>swoole Currently, curl hooks are not supported for PHP 8.0.x (which may be fixed in the future).</li><li>When compiling, if only <code>swoole</code> extension is included, the supported Swoole database coroutine hook will not be fully enabled. If you need to use it, please add the corresponding <code>swoole-hook-xxx</code> extension.</li><li>The <code>zend_mm_heap corrupted</code> problem may occur in swoole under some extension combinations. The cause has not yet been found.</li></ol><h2 id="swoole-hook-pgsql" tabindex="-1">swoole-hook-pgsql <a class="header-anchor" href="#swoole-hook-pgsql" aria-label="Permalink to “swoole-hook-pgsql”">​</a></h2><p>swoole-hook-pgsql is not an extension, it&#39;s a Hook feature of Swoole. If you use <code>swoole,swoole-hook-pgsql</code>, you will enable Swoole&#39;s PostgreSQL client and the coroutine mode of the <code>pdo_pgsql</code> extension.</p><p>swoole-hook-pgsql conflicts with the <code>pdo_pgsql</code> extension. If you want to use Swoole and <code>pdo_pgsql</code>, please delete the pdo_pgsql extension and enable <code>swoole</code> and <code>swoole-hook-pgsql</code>. This extension contains an implementation of the coroutine environment for <code>pdo_pgsql</code>.</p><p>On macOS systems, <code>pdo_pgsql</code> may not be able to connect to the postgresql server normally, please use it with caution.</p><h2 id="swoole-hook-mysql" tabindex="-1">swoole-hook-mysql <a class="header-anchor" href="#swoole-hook-mysql" aria-label="Permalink to “swoole-hook-mysql”">​</a></h2><p>swoole-hook-mysql is not an extension, it&#39;s a Hook feature of Swoole. If you use <code>swoole,swoole-hook-mysql</code>, you will enable the coroutine mode of Swoole&#39;s <code>mysqlnd</code> and <code>pdo_mysql</code>.</p><h2 id="swoole-hook-sqlite" tabindex="-1">swoole-hook-sqlite <a class="header-anchor" href="#swoole-hook-sqlite" aria-label="Permalink to “swoole-hook-sqlite”">​</a></h2><p>swoole-hook-sqlite is not an extension, it&#39;s a Hook feature of Swoole. If you use <code>swoole,swoole-hook-sqlite</code>, you will enable the coroutine mode of Swoole&#39;s <code>pdo_sqlite</code> (Swoole must be 5.1 or above).</p><p>swoole-hook-sqlite conflicts with the <code>pdo_sqlite</code> extension. If you want to use Swoole and <code>pdo_sqlite</code>, please delete the pdo_sqlite extension and enable <code>swoole</code> and <code>swoole-hook-sqlite</code>. This extension contains an implementation of the coroutine environment for <code>pdo_sqlite</code>.</p><h2 id="swoole-hook-odbc" tabindex="-1">swoole-hook-odbc <a class="header-anchor" href="#swoole-hook-odbc" aria-label="Permalink to “swoole-hook-odbc”">​</a></h2><p>swoole-hook-odbc is not an extension, it&#39;s a Hook feature of Swoole. If you use <code>swoole,swoole-hook-odbc</code>, you will enable the coroutine mode of Swoole&#39;s <code>odbc</code> extension.</p><p>swoole-hook-odbc conflicts with the <code>pdo_odbc</code> extension. If you want to use Swoole and <code>pdo_odbc</code>, please delete the <code>pdo_odbc</code> extension and enable <code>swoole</code> and <code>swoole-hook-odbc</code>. This extension contains an implementation of the coroutine environment for <code>pdo_odbc</code>.</p><h2 id="swow" tabindex="-1">swow <a class="header-anchor" href="#swow" aria-label="Permalink to “swow”">​</a></h2><ol><li>Only PHP 8.0+ is supported.</li></ol><h2 id="imagick" tabindex="-1">imagick <a class="header-anchor" href="#imagick" aria-label="Permalink to “imagick”">​</a></h2><ol><li>OpenMP support is disabled, this is recommended by the maintainers and also the case system packages.</li></ol><h2 id="imap" tabindex="-1">imap <a class="header-anchor" href="#imap" aria-label="Permalink to “imap”">​</a></h2><ol><li>Kerberos is not supported</li><li>ext-imap is not thread safe due to the underlying c-client. It&#39;s not possible to use it in <code>--enable-zts</code> builds.</li><li>The extension was dropped from php 8.4, we recommend you look for an alternative implementation, such as <a href="https://github.com/Webklex/php-imap" target="_blank" rel="noreferrer">Webklex/php-imap</a></li></ol><h2 id="gd" tabindex="-1">gd <a class="header-anchor" href="#gd" aria-label="Permalink to “gd”">​</a></h2><ol><li>gd Extension relies on more additional Graphics library. By default, using <code>bin/spc build gd</code> directly will not support some Graphics library, such as <code>libjpeg</code>, <code>libavif</code>, etc. Currently, it supports four libraries: <code>freetype,libjpeg,libavif,libwebp</code>. Therefore, the following command can be used to introduce them into the gd library:</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bin/spc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-libs=freetype,libjpeg,libavif,libwebp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --build-cli</span></span></code></pre></div><h2 id="mcrypt" tabindex="-1">mcrypt <a class="header-anchor" href="#mcrypt" aria-label="Permalink to “mcrypt”">​</a></h2><ol><li>Currently not supported, and this extension will not be supported in the future. <a href="https://github.com/crazywhalecc/static-php-cli/issues/32" target="_blank" rel="noreferrer">#32</a></li></ol><h2 id="oci8" tabindex="-1">oci8 <a class="header-anchor" href="#oci8" aria-label="Permalink to “oci8”">​</a></h2><ol><li>oci8 is an extension of the Oracle database, because the library on which the extension provided by Oracle does not provide a statically compiled version (<code>.a</code>) or source code, and this extension cannot be compiled into php by static linking, so it cannot be supported.</li></ol><h2 id="xdebug" tabindex="-1">xdebug <a class="header-anchor" href="#xdebug" aria-label="Permalink to “xdebug”">​</a></h2><ol><li>Xdebug is only buildable as a shared extension. On Linux, you&#39;ll need to use a SPC_TARGET like <code>native-native -dynamic</code> or <code>native-native-gnu</code>.</li><li>When using Linux/glibc or macOS, you can compile Xdebug as a shared extension using --build-shared=&quot;xdebug&quot;. The compiled <code>./php</code> binary can be configured and run by specifying the INI, eg <code>./php -d &#39;zend_extension=/path/to/xdebug.so&#39; your-code.php</code>.</li></ol><h2 id="xml" tabindex="-1">xml <a class="header-anchor" href="#xml" aria-label="Permalink to “xml”">​</a></h2><ol><li>xml includes xml, xmlreader, xmlwriter, xsl, dom, simplexml, etc. When adding xml extensions, it is best to enable these extensions at the same time.</li><li>libxml is included in xml extension. Enabling xml is equivalent to enabling libxml.</li></ol><h2 id="glfw" tabindex="-1">glfw <a class="header-anchor" href="#glfw" aria-label="Permalink to “glfw”">​</a></h2><ol><li>glfw depends on OpenGL, and linux environment also needs X11, which cannot be linked statically.</li><li>macOS platform, we can compile and link system builtin OpenGL and related libraries dynamically.</li></ol><h2 id="rar" tabindex="-1">rar <a class="header-anchor" href="#rar" aria-label="Permalink to “rar”">​</a></h2><ol><li>The rar extension currently has a problem when compiling phpmicro with the <code>common</code> extension collection in the macOS x86_64 environment.</li></ol><h2 id="pgsql" tabindex="-1">pgsql <a class="header-anchor" href="#pgsql" aria-label="Permalink to “pgsql”">​</a></h2><p><s>pgsql ssl connection is not compatible with openssl 3.2.0. See:</s></p><ul><li><s><a href="https://github.com/Homebrew/homebrew-core/issues/155651" target="_blank" rel="noreferrer">https://github.com/Homebrew/homebrew-core/issues/155651</a></s></li><li><s><a href="https://github.com/Homebrew/homebrew-core/pull/155699" target="_blank" rel="noreferrer">https://github.com/Homebrew/homebrew-core/pull/155699</a></s></li><li><s><a href="https://github.com/postgres/postgres/commit/c82207a548db47623a2bfa2447babdaa630302b9" target="_blank" rel="noreferrer">https://github.com/postgres/postgres/commit/c82207a548db47623a2bfa2447babdaa630302b9</a></s></li></ul><p>pgsql 16.2 has fixed this bug, now it&#39;s working.</p><p>When pgsql uses SSL connection, there may be <code>error:80000002:system library::No such file or directory</code> error, For details on the solution, see <a href="./../faq/#unable-to-use-ssl">FAQ - Unable to use ssl</a>.</p><h2 id="openssl" tabindex="-1">openssl <a class="header-anchor" href="#openssl" aria-label="Permalink to “openssl”">​</a></h2><p>When using openssl-based extensions (such as curl, pgsql and other network libraries), there may be an <code>error:80000002:system library::No such file or directory</code> error. For details on the solution, see <a href="./../faq/#unable-to-use-ssl">FAQ - Unable to use ssl</a>.</p><h2 id="password-argon2" tabindex="-1">password-argon2 <a class="header-anchor" href="#password-argon2" aria-label="Permalink to “password-argon2”">​</a></h2><ol><li>password-argon2 is not a standard extension. The algorithm <code>PASSWORD_ARGON2ID</code> for the <code>password_hash</code> function needs libsodium or libargon2 to work.</li><li>using password-argon2 enables multithread support for this.</li></ol><h2 id="ffi" tabindex="-1">ffi <a class="header-anchor" href="#ffi" aria-label="Permalink to “ffi”">​</a></h2><ol><li>Due to the limitation of musl libc&#39;s static linkage, you cannot use ffi because dynamic libraries cannot be loaded. If you need to use the ffi extension, see <a href="./build-with-glibc.html">Compile PHP with GNU libc</a>.</li><li>macOS supports the ffi extension, but errors will occur when some kernels do not contain debugging symbols.</li><li>Windows x64 supports the ffi extension.</li></ol><h2 id="xhprof" tabindex="-1">xhprof <a class="header-anchor" href="#xhprof" aria-label="Permalink to “xhprof”">​</a></h2><p>The xhprof extension consists of three parts: <code>xhprof_extension</code>, <code>xhprof_html</code>, <code>xhprof_libs</code>. Only <code>xhprof_extension</code> is included in the compiled binary. If you need to use xhprof, please download the source code from <a href="http://pecl.php.net/package/xhprof" target="_blank" rel="noreferrer">pecl.php.net/package/xhprof</a> and specify the <code>xhprof_libs</code> and <code>xhprof_html</code> paths for use.</p><h2 id="event" tabindex="-1">event <a class="header-anchor" href="#event" aria-label="Permalink to “event”">​</a></h2><p>If you enable event extension on macOS, the <code>openpty</code> will be disabled due to issue:</p><ul><li><a href="https://github.com/crazywhalecc/static-php-cli/issues/335" target="_blank" rel="noreferrer">static-php-cli#335</a></li></ul><h2 id="parallel" tabindex="-1">parallel <a class="header-anchor" href="#parallel" aria-label="Permalink to “parallel”">​</a></h2><p>Parallel is only supported on PHP 8.0 ZTS and above.</p><h2 id="spx" tabindex="-1">spx <a class="header-anchor" href="#spx" aria-label="Permalink to “spx”">​</a></h2><ol><li>SPX does not support Windows, and the official repository does not support static compilation. static-php-cli uses a <a href="https://github.com/static-php/php-spx" target="_blank" rel="noreferrer">modified version</a>.</li></ol><h2 id="mimalloc" tabindex="-1">mimalloc <a class="header-anchor" href="#mimalloc" aria-label="Permalink to “mimalloc”">​</a></h2><ol><li>This is not technically an extension, but a library.</li><li>Building with <code>--with-libs=&quot;mimalloc&quot;</code> on Linux or macOS will override the default allocator.</li><li>This is experimental for now, but is recommended in threaded environments.</li></ol>',64)]))}const u=o(s,[["render",t]]);export{b as __pageData,u as default};
